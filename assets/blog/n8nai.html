<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>n8nai ‚Äì Telegram AI Bots with n8n, Self-Signed HTTPS and Ngrok ‚Äì Anass Assim</title>
    <link rel="icon" type="image/x-icon" href="/assets/img/anass1.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.6s ease-out',
                        'slide-up': 'slideUp 0.8s ease-out',
                        'scale-in': 'scaleIn 0.5s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        },
                        scaleIn: {
                            '0%': { opacity: '0', transform: 'scale(0.95)' },
                            '100%': { opacity: '1', transform: 'scale(1)' }
                        },
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at top left, #e0f2fe, #ffffff 55%);
        }

        .nav-link {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-link::before {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #0ea5e9, #3b82f6);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateX(-50%);
        }

        .nav-link:hover::before {
            width: 100%;
        }

        .nav-link:hover {
            color: #0ea5e9;
            transform: translateY(-2px);
        }

        .scroll-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, #0ea5e9, #3b82f6, #8b5cf6);
            z-index: 1000;
            transition: width 0.1s ease;
        }

        .article-container {
            max-width: 960px;
        }

        .article-body p {
            margin-bottom: 1rem;
        }

        .article-body h2 {
            margin-top: 2.5rem;
            margin-bottom: 0.75rem;
        }

        .article-body h3 {
            margin-top: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .article-body code {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 0.85em;
            background: rgba(15,23,42,0.06);
            padding: 0.15rem 0.35rem;
            border-radius: 9999px;
        }

        pre.code-block {
            background: #020617;
            color: #e5e7eb;
            border-radius: 0.75rem;
            padding: 1.25rem 1rem;
            overflow-x: auto;
            font-size: 0.85rem;
            border: 1px solid rgba(148,163,184,0.3);
        }

        pre.code-block code {
            background: transparent;
            padding: 0;
            border-radius: 0;
        }

        .toc-link {
            font-size: 0.85rem;
            color: #64748b;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0;
        }

        .toc-link.active {
            color: #0ea5e9;
            font-weight: 600;
        }

        .badge-pill {
            border-radius: 9999px;
        }

        .article-hero {
            background: radial-gradient(circle at top left, rgba(56,189,248,0.15), transparent 55%),
                        radial-gradient(circle at bottom right, rgba(129,140,248,0.18), transparent 55%);
        }

        .magnetic {
            transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ---------- OPTIONAL IMAGE BLOCK ---------- */
        .article-image-wrapper {
            margin: 1.75rem 0;
            border-radius: 1rem;
            overflow: hidden;
            border: 1px solid rgba(148,163,184,0.5);
            background:
                radial-gradient(circle at top left, rgba(56,189,248,0.10), transparent 60%),
                #0f172a;
        }

        .article-image-wrapper img {
            display: block;
            width: 100%;
            height: auto;
            object-fit: cover;
        }

        .article-image-caption {
            font-size: 0.78rem;
            line-height: 1.4;
            padding: 0.65rem 0.9rem;
            background: rgba(15,23,42,0.94);
            color: #e5e7eb;
            border-top: 1px solid rgba(148,163,184,0.5);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0.75rem;
        }

        .article-image-caption span {
            opacity: 0.85;
        }

        .article-image-caption small {
            font-size: 0.7rem;
            color: #9ca3af;
            white-space: nowrap;
        }

        /* ---------- MUSIC PLAYER (SIDEBAR) ---------- */
        .reading-music-card {
            background:
                radial-gradient(circle at top left, rgba(56,189,248,0.18), transparent 55%),
                #020617;
            border-radius: 0.9rem;
            border: 1px solid rgba(148,163,184,0.5);
            box-shadow: 0 16px 35px rgba(15,23,42,0.7);
        }

        .player-progress-track {
            position: relative;
            height: 5px;
            border-radius: 9999px;
            background: rgba(148,163,184,0.35);
            cursor: pointer;
            overflow: hidden;
        }

        .player-progress-fill {
            position: absolute;
            inset: 0;
            width: 0%;
            border-radius: inherit;
            background: linear-gradient(90deg, #0ea5e9, #3b82f6, #8b5cf6);
        }

        .player-btn {
            transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
        }

        .player-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 22px rgba(15,23,42,0.65);
        }

        .player-btn:active {
            transform: translateY(0);
            box-shadow: none;
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-800 overflow-x-hidden">
    <div class="scroll-indicator"></div>
    <header class="fixed top-0 w-full z-50 transition-all duration-300 bg-white/80 backdrop-blur-md border-b border-white/20" id="navbar">
        <nav class="max-w-6xl mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="/index.html#home" class="text-2xl font-bold text-sky-600 hover:scale-105 transition-transform duration-300">
                    Anass Assim
                </a>
                
                <div class="hidden md:flex space-x-8">
                    <a href="/index.html" class="nav-link text-slate-700 font-medium">Home</a>
                    <a href="/index.html#skills" class="nav-link text-slate-700 font-medium">Skills</a>
                    <a href="/index.html#experience" class="nav-link text-slate-700 font-medium">Experience</a>
                    <a href="/index.html#projects" class="nav-link text-slate-700 font-medium">Projects</a>
                    <a href="/index.html#contact" class="nav-link text-slate-700 font-medium">Contact</a>
                    <a href="/blog.html" class="nav-link text-sky-600 font-semibold">Blog</a>
                    <a href="/AnassOs.html" class="nav-link text-slate-700 font-medium">AnassOS</a>
                    <a href="/Terminal.html" class="nav-link text-slate-700 font-medium">Terminal</a>
                </div>

                <button id="mobile-menu-button"
                        type="button"
                        class="md:hidden text-slate-700 hover:text-sky-600 transition-colors"
                        aria-controls="mobile-menu"
                        aria-expanded="false"
                        aria-label="Open main menu">
                    <i class="fas fa-bars text-2xl" aria-hidden="true"></i>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden mt-4 pb-4 border-t border-slate-200">
                <div class="flex flex-col space-y-2 pt-4">
                    <a href="../index.html#home" class="text-slate-700 hover:text-sky-600 py-2 px-4 rounded-lg hover:bg-sky-50 transition-all">Home</a>
                    <a href="../index.html#skills" class="text-slate-700 hover:text-sky-600 py-2 px-4 rounded-lg hover:bg-sky-50 transition-all">Skills</a>
                    <a href="../index.html#experience" class="text-slate-700 hover:text-sky-600 py-2 px-4 rounded-lg hover:bg-sky-50 transition-all">Experience</a>
                    <a href="../index.html#projects" class="text-slate-700 hover:text-sky-600 py-2 px-4 rounded-lg hover:bg-sky-50 transition-all">Projects</a>
                    <a href="../index.html#contact" class="text-slate-700 hover:text-sky-600 py-2 px-4 rounded-lg hover:bg-sky-50 transition-all">Contact</a>
                    <a href="../AnassOs.html" class="text-slate-700 hover:text-sky-600 py-2 px-4 rounded-lg hover:bg-sky-50 transition-all">AnassOS</a>
                    <a href="../Terminal.html" class="text-slate-700 hover:text-sky-600 py-2 px-4 rounded-lg hover:bg-sky-50 transition-all">Terminal</a>
                    <a href="../blog.html" class="text-sky-700 font-semibold py-2 px-4 rounded-lg bg-sky-50 transition-all">Blog</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="pt-24 pb-16">
    <!-- Hero / Meta -->
    <section class="article-hero border-b border-slate-200">
        <div class="max-w-6xl mx-auto px-6 py-10">
            <div class="flex flex-wrap items-center justify-between gap-4 mb-6 text-xs text-slate-500">
                <div class="flex items-center gap-3">
                    <a href="/blog.html" class="inline-flex items-center text-slate-500 hover:text-sky-600">
                        <i class="fa-solid fa-arrow-left mr-2 text-xs"></i> Back to all posts
                    </a>
                    <span class="hidden sm:inline-block w-px h-4 bg-slate-300"></span>
                    <span class="inline-flex items-center gap-1">
                        <i class="fa-regular fa-calendar"></i>
                        <span id="post-date">2025-09-20</span>
                    </span>
                    <span class="inline-flex items-center gap-1">
                        <i class="fa-regular fa-clock"></i>
                        <span id="read-time">~13 min read</span>
                    </span>
                </div>
                <div class="flex flex-wrap gap-2">
                    <span class="px-3 py-1 bg-sky-100 text-sky-700 text-[11px] font-semibold badge-pill">
                        <i class="fa-solid fa-tag mr-1"></i> ChatOps
                    </span>
                    <span class="px-3 py-1 bg-emerald-100 text-emerald-700 text-[11px] font-semibold badge-pill">
                        <i class="fa-solid fa-robot mr-1"></i> AI Bots
                    </span>
                    <span class="px-3 py-1 bg-amber-100 text-amber-700 text-[11px] font-semibold badge-pill">
                        <i class="fa-solid fa-shield-halved mr-1"></i> HTTPS
                    </span>
                    <span class="px-3 py-1 bg-slate-900 text-slate-100 text-[11px] font-semibold badge-pill">
                        <i class="fa-solid fa-user-gear mr-1"></i> Anass Assim
                    </span>
                </div>
            </div>

            <div class="grid lg:grid-cols-[1.6fr,1fr] gap-10 items-start">
                <div>
                    <h1 class="text-3xl md:text-4xl font-extrabold text-slate-900 mb-4 leading-tight">
                        n8nai ‚Äì Telegram AI Bots with n8n, Self-Signed HTTPS and Ngrok
                    </h1>
                    <p class="text-slate-600 text-sm md:text-base max-w-2xl">
                        This post documents <strong>n8nai</strong>: a self-contained n8n environment that runs multiple
                        Telegram AI bots (short answers, translation, image transcription, text fixing) over HTTPS using
                        a self-signed CA, Docker and ngrok. It‚Äôs built to be reproducible: clone, generate certs, run
                        <code>docker compose up</code>, and start chatting with your bots.
                    </p>
                </div>

                <!-- Meta JSON card -->
                <div class="relative rounded-2xl overflow-hidden border border-white shadow-xl bg-slate-900 text-slate-100">
                    <div class="px-4 py-2 flex items-center justify-between border-b border-slate-800">
                        <div class="flex items-center space-x-1.5">
                            <span class="w-2.5 h-2.5 rounded-full bg-red-500"></span>
                            <span class="w-2.5 h-2.5 rounded-full bg-yellow-500"></span>
                            <span class="w-2.5 h-2.5 rounded-full bg-green-500"></span>
                        </div>
                        <span class="text-[11px] text-slate-300">post_meta.json</span>
                        <i class="fa-solid fa-code text-[11px] text-slate-400"></i>
                    </div>
                    <div class="p-4 font-mono text-[11px] leading-relaxed">
<pre class="whitespace-pre-wrap"><code>{
  "title": "n8nai ‚Äì Telegram AI Bots with n8n & HTTPS",
  "status": "published",
  "topics": ["chatops", "ai-bots", "automation"],
  "stack": ["n8n", "Docker", "Ngrok", "Groq", "Gemini", "Telegram Bot"],
  "repo": "github.com/ciscoAnass/n8nai",
  "location": "Seville, Spain"
}</code></pre>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Article content + TOC + MUSIC PLAYER -->
    <section class="mt-8">
        <div class="max-w-6xl mx-auto px-6 flex flex-col lg:flex-row gap-10">

            <!-- Main article -->
            <article class="article-container mx-auto lg:mx-0 lg:flex-1">
                <div class="article-body text-sm md:text-[15px] text-slate-700 leading-relaxed" id="article-content">

                    <!-- 1 -->
                    <h2 id="intro" class="text-xl font-semibold text-slate-900">
                        1. Why I Built n8nai ‚Äì A Safe Playground for Telegram + n8n + AI
                    </h2>
                    <p>
                        I already use <strong>n8n</strong> for a lot of automation work, and I really like Telegram
                        bots for quick interactions: short answers, translations, text clean-up, sending images from
                        my phone and getting useful output back. But each new bot was starting to feel like a small
                        infrastructure project:
                    </p>
                    <ul class="list-disc pl-6 space-y-1">
                        <li>Set up HTTPS correctly so Telegram webhooks behave.</li>
                        <li>Protect the n8n UI with basic auth and encryption key.</li>
                        <li>Keep the stack reproducible across machines.</li>
                        <li>Deal with self-signed certs and ‚Äúnot secure‚Äù warnings.</li>
                    </ul>
                    <p class="mt-3">
                        <strong>n8nai</strong> is my attempt to freeze all that into a single, <em>reusable</em>
                        repository: one Docker Compose file, one SSL setup, one ngrok tunnel, and multiple AI-powered
                        Telegram workflows you can import and start using in minutes.
                    </p>

                    <!-- 2 -->
                    <h2 id="stack" class="mt-8 text-xl font-semibold text-slate-900">
                        2. Stack & Repository Layout
                    </h2>
                    <p>
                        The goal with n8nai is to keep the stack minimal but ‚Äúproduction-shaped‚Äù: you get HTTPS, an
                        internal CA, basic auth and persistent storage without having to stitch ten different repos
                        together.
                    </p>

                    <h3 class="mt-4 text-base font-semibold text-slate-900">
                        2.1 What n8nai Ships With
                    </h3>
                    <ul class="list-disc pl-6 space-y-1">
                        <li><strong>n8n</strong> running in Docker, exposed on <code>https://localhost:8080</code>.</li>
                        <li><strong>Self-signed CA + server certs</strong> under <code>ssl/</code> for local HTTPS.</li>
                        <li><strong>Ngrok</strong> to publish a temporary HTTPS URL for Telegram webhooks.</li>
                        <li><strong>Basic auth + encryption key</strong> controlled via <code>.env</code>.</li>
                        <li><strong>Telegram AI workflows</strong> for:
                            <ul class="list-disc pl-6 mt-1">
                                <li>Short answers (LLM-powered).</li>
                                <li>Translator.</li>
                                <li>Image ‚Üí text transcriber.</li>
                                <li>Text fixer (grammar & formatting).</li>
                            </ul>
                        </li>
                    </ul>

                    <h3 class="mt-6 text-base font-semibold text-slate-900">
                        2.2 Repo Structure
                    </h3>
                    <p>
                        The repository is small enough to understand in one sitting:
                    </p>

<pre class="code-block mt-4"><code>.
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ ssl/
‚îÇ   ‚îú‚îÄ‚îÄ ca.crt
‚îÇ   ‚îú‚îÄ‚îÄ ca.key
‚îÇ   ‚îú‚îÄ‚îÄ ca.srl
‚îÇ   ‚îú‚îÄ‚îÄ n8n.crt
‚îÇ   ‚îú‚îÄ‚îÄ n8n.csr
‚îÇ   ‚îî‚îÄ‚îÄ n8n.key
‚îî‚îÄ‚îÄ Workflows/
    ‚îú‚îÄ‚îÄ Image-Transcribe.json
    ‚îú‚îÄ‚îÄ n8n-Ttranslate.json
    ‚îú‚îÄ‚îÄ Short-Answer.json
    ‚îî‚îÄ‚îÄ Text-Fixer.json</code></pre>

                    <p class="mt-3">
                        The idea is: <code>docker-compose.yml</code> gives you the runtime, <code>ssl/</code> gives
                        you HTTPS, and <code>Workflows/</code> holds the n8n workflows that define the bots.
                    </p>

                    <!-- Article image -->
                    <div class="article-image-wrapper">
                        <img src="/assets/img/n8naiblog.png"
                             alt="n8nai architecture ‚Äì Docker, n8n, self-signed TLS, ngrok and Telegram bots">
                        <div class="article-image-caption">
                            <span>Architecture sketch ‚Äì Docker + n8n behind self-signed TLS, ngrok on top, Telegram bots hitting webhooks.</span>

                        </div>
                    </div>

                    <h3 class="mt-6 text-base font-semibold text-slate-900">
                        2.3 Environment Variables
                    </h3>
                    <p>
                        The <code>.env</code> file is the control center for n8nai. It typically contains:
                    </p>

<pre class="code-block mt-3"><code>N8N_HOST=https://your-ngrok-url.ngrok-free.app
N8N_ENCRYPTION_KEY=your-long-random-key
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=change_me</code></pre>

                    <p class="mt-3">
                        <code>N8N_HOST</code> must be the public HTTPS URL (ngrok) so that Telegram can reach your
                        webhooks. The basic auth and encryption key add a minimal security layer around the n8n UI and
                        credentials.
                    </p>

                    <!-- 3 -->
                    <h2 id="implementation" class="mt-8 text-xl font-semibold text-slate-900">
                        3. Implementation ‚Äì From Clone to Live Telegram Bots
                    </h2>
                    <p>
                        The nice part about n8nai is that the setup fits on a single page: clone, generate certs,
                        configure <code>.env</code>, run Docker, start ngrok, plug the Telegram workflows.
                    </p>

                    <h3 class="mt-4 text-base font-semibold text-slate-900">
                        3.1 Clone & Inspect the Stack
                    </h3>
                    <p>
                        First step is the usual:
                    </p>

<pre class="code-block mt-3"><code>git clone https://github.com/ciscoAnass/n8nai.git
cd n8nai

# optional: inspect the compose file and workflows
ls
cat docker-compose.yml</code></pre>

                    <p class="mt-3">
                        The <code>docker-compose.yml</code> mounts the <code>ssl/</code> directory into the container,
                        exposes <code>8080</code>, persists n8n‚Äôs data, and reads all the configuration from
                        <code>.env</code>.
                    </p>

                    <h3 class="mt-6 text-base font-semibold text-slate-900">
                        3.2 Generate a Self-Signed CA & Certificates
                    </h3>
                    <p>
                        To run n8n on HTTPS locally you create a tiny internal PKI: a CA and a server certificate for
                        the n8n host. A typical flow:
                    </p>

<pre class="code-block mt-3"><code>mkdir -p ssl

# 1) Create an internal CA
openssl genrsa -out ssl/ca.key 4096
openssl req -x509 -new -key ssl/ca.key \
  -days 3650 -sha256 -subj "/CN=asir-internal-ca" \
  -out ssl/ca.crt

# 2) Create an n8n server certificate
openssl genrsa -out ssl/n8n.key 2048
openssl req -new -key ssl/n8n.key -subj "/CN=n8n" -out ssl/n8n.csr
openssl x509 -req -in ssl/n8n.csr \
  -CA ssl/ca.crt -CAkey ssl/ca.key -CAcreateserial \
  -days 825 -sha256 \
  -extfile <(printf "subjectAltName=DNS:n8n") \
  -out ssl/n8n.crt</code></pre>

                    <p class="mt-3">
                        All of these files live inside <code>ssl/</code>, which the container then mounts so n8n can
                        serve HTTPS. You can also import <code>ca.crt</code> into your OS or browser trust store so the
                        warnings disappear.
                    </p>

                    <h3 class="mt-6 text-base font-semibold text-slate-900">
                        3.3 Configure .env and Start Docker
                    </h3>
                    <p>
                        With certificates in place, copy your env template and adjust:
                    </p>

<pre class="code-block mt-3"><code>cp .env .env.backup  # if you already have one
# edit .env and set N8N_HOST, basic auth, encryption key</code></pre>

                    <p class="mt-3">
                        Then run the stack:
                    </p>

<pre class="code-block mt-3"><code>docker compose up -d</code></pre>

                    <p class="mt-3">
                        After a few seconds, n8n should be reachable at:
                    </p>

<pre class="code-block mt-3"><code>https://localhost:8080</code></pre>

                    <p class="mt-3">
                        Log in with the basic auth credentials from <code>.env</code>, create your initial n8n owner
                        account, and you‚Äôre ready to import the workflows from the <code>Workflows/</code> folder.
                    </p>

                    <h3 class="mt-6 text-base font-semibold text-slate-900">
                        3.4 Ngrok & N8N_HOST ‚Äì Making Telegram Webhooks Happy
                    </h3>
                    <p>
                        Telegram needs a public HTTPS URL to send updates to. That‚Äôs where <strong>ngrok</strong> comes
                        in:
                    </p>

<pre class="code-block mt-3"><code># with n8n already running on https://localhost:8080
ngrok http https://localhost:8080</code></pre>

                    <p class="mt-3">
                        ngrok prints a random <code>https://</code> URL like
                        <code>https://your-prefix.ngrok-free.app</code>. Put that into your <code>.env</code> as
                        <code>N8N_HOST</code> and restart the container so n8n uses it for webhook URLs.
                    </p>
                    <p class="mt-3">
                        Inside each Telegram workflow, the <code>Telegram Trigger</code> node points to a webhook path
                        on that host. Once you activate the workflow, n8n registers the webhook and Telegram starts
                        sending messages to your ngrok URL, which are then forwarded into the workflow.
                    </p>

                    <h3 class="mt-6 text-base font-semibold text-slate-900">
                        3.5 The Bots ‚Äì Short Answer, Translator, Image Transcriber & Text Fixer
                    </h3>
                    <p>
                        The <code>Workflows/</code> folder holds four JSON workflows you can import into n8n:
                    </p>
                    <ul class="list-disc pl-6 space-y-1">
                        <li><strong>Short-Answer.json</strong> ‚Äì a bot that returns short, direct answers based on an LLM
                            (Groq, Gemini, etc.), ideal for quick questions.
                        </li>
                        <li><strong>n8n-Ttranslate.json</strong> ‚Äì a translation bot that takes incoming messages and
                            responds in the target language you configure.
                        </li>
                        <li><strong>Image-Transcribe.json</strong> ‚Äì accepts an image from Telegram, passes it through an
                            AI model that can read text, and returns the extracted text.
                        </li>
                        <li><strong>Text-Fixer.json</strong> ‚Äì cleans up grammar, spelling and formatting for any text
                            you send it, and replies with a polished version.
                        </li>
                    </ul>

                    <p class="mt-3">
                        All of them share a similar backbone:
                    </p>
                    <ul class="list-disc pl-6 space-y-1">
                        <li><code>Telegram Trigger</code> node to receive updates.</li>
                        <li>One or more nodes to call <strong>Groq</strong> or <strong>Gemini</strong> LLM APIs.</li>
                        <li><code>Send Telegram Message</code> node to push the result back to the user or group.</li>
                    </ul>

                    <!-- 4 -->
                    <h2 id="lessons" class="mt-8 text-xl font-semibold text-slate-900">
                        4. Lessons Learned ‚Äì TLS, Webhooks and ChatOps UX
                    </h2>
                    <p>
                        Building n8nai forced me to clean up a lot of half-baked notes about HTTPS, internal CAs and
                        webhooks into a single, working recipe. A few takeaways:
                    </p>

                    <ul class="list-disc pl-6 space-y-1">
                        <li><strong>Self-signed CAs are powerful when organized.</strong> A simple CA + cert pair under
                            <code>ssl/</code> is enough to give you proper HTTPS for local automation tools.
                        </li>
                        <li><strong>Webhook-based bots need stable URLs.</strong> Using <code>N8N_HOST</code> as the
                            ‚Äúsource of truth‚Äù for public URLs makes things easier to reason about.
                        </li>
                        <li><strong>Basic auth is a good first gate.</strong> It‚Äôs not a replacement for SSO or OAuth,
                            but it‚Äôs much better than leaving n8n wide open on the Internet.
                        </li>
                        <li><strong>ChatOps UX matters.</strong> Short, focused bots beat one ‚Äúmega-bot‚Äù that tries to
                            do everything with a million commands.
                        </li>
                        <li><strong>Reproducibility pays off.</strong> Having Docker + SSL + ngrok + workflows tied into
                            one repo makes it trivial to rebuild the stack later or move it to another host.
                        </li>
                    </ul>

                    <!-- 5 -->
                    <h2 id="next" class="mt-8 text-xl font-semibold text-slate-900">
                        5. What‚Äôs Next for n8nai?
                    </h2>
                    <p>
                        n8nai is intentionally small, but there‚Äôs a clear roadmap for turning it into a more complete
                        ‚ÄúTelegram AI bot lab‚Äù:
                    </p>

                    <ul class="list-disc pl-6 space-y-1">
                        <li><strong>More workflows:</strong> add bots for summaries, code review, documentation search,
                            or DevOps runbooks.
                        </li>
                        <li><strong>Config via UI:</strong> manage Telegram tokens, Groq/Gemini keys and languages from
                            a small config workflow instead of environment variables.
                        </li>
                        <li><strong>Replace ngrok with Caddy/Traefik:</strong> for more permanent deployments with DNS
                            and proper certificates.
                        </li>
                        <li><strong>Observability:</strong> ship logs and metrics (per-bot usage, latency) to a
                            Prometheus/Grafana stack.
                        </li>
                        <li><strong>Multi-tenant mode:</strong> run several Telegram bots for different teams or groups,
                            each with their own workflows and limits.
                        </li>
                    </ul>

                    <p class="mt-3">
                        Even without those, n8nai already hits its main goal: give you a clean, repeatable starting
                        point for building Telegram AI bots on top of n8n, with HTTPS and security handled from day one.
                    </p>

                    <div class="mt-8 p-4 rounded-2xl border border-sky-100 bg-sky-50/60 text-sm text-slate-700">
                        <p class="font-semibold text-slate-900 mb-1">
                            üí¨ Want to play with n8n + Telegram + AI?
                        </p>
                        <p>
                            Reach out on LinkedIn or email if you want to extend these workflows, wire them into your
                            own stack, or build similar setups for other chat platforms.
                        </p>
                    </div>
                </div>

                <!-- Bottom meta -->
                <div class="mt-10 flex flex-wrap items-center justify-between gap-4 text-xs text-slate-500">
                    <div class="flex flex-wrap gap-2">
                        <span class="px-3 py-1 bg-slate-900 text-slate-100 badge-pill">
                            <i class="fa-solid fa-hashtag mr-1"></i> n8nai
                        </span>
                        <span class="px-3 py-1 bg-sky-100 text-sky-700 badge-pill">
                            chatops
                        </span>
                        <span class="px-3 py-1 bg-emerald-100 text-emerald-700 badge-pill">
                            n8n
                        </span>
                        <span class="px-3 py-1 bg-indigo-100 text-indigo-700 badge-pill">
                            telegram-bot
                        </span>
                        <span class="px-3 py-1 bg-amber-100 text-amber-700 badge-pill">
                            https
                        </span>
                        <span class="px-3 py-1 bg-rose-100 text-rose-700 badge-pill">
                            ngrok
                        </span>
                    </div>
                    <button id="copy-link-btn"
                            class="inline-flex items-center px-3 py-2 border border-slate-200 rounded-xl text-[11px] hover:bg-slate-100 transition">
                        <i class="fa-solid fa-link mr-2 text-slate-500"></i>
                        Copy article link
                    </button>
                </div>
            </article>

            <!-- Sidebar: Music player + Guide map + Author -->
            <aside class="lg:w-72 lg:flex-shrink-0">
                <div class="sticky top-28 space-y-6">

                    <!-- MUSIC PLAYER (SIDEBAR) -->
                    <div class="reading-music-card p-4 text-slate-50">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-3">
                                <div class="w-11 h-11 rounded-2xl bg-slate-800 border border-slate-700 flex items-center justify-center shadow-inner">
                                    <i class="fa-solid fa-music text-sky-400 text-sm"></i>
                                </div>
                                <div class="space-y-0.5">
                                    <p class="text-[10px] uppercase tracking-[0.18em] text-slate-400">
                                        Reading soundtrack
                                    </p>
                                    <p class="text-xs font-semibold text-slate-50">
                                        Late Night Bots ‚Äì Focus Mix
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between mb-2">
                            <button id="play-pause-btn"
                                    class="player-btn w-9 h-9 rounded-full bg-sky-500 hover:bg-sky-400 flex items-center justify-center border border-sky-300 shadow">
                                <i id="play-pause-icon" class="fa-solid fa-play text-[11px] text-slate-950 ml-0.5"></i>
                            </button>
                            <div class="flex items-center gap-2 text-[10px] text-slate-300">
                                <span id="player-current-time">0:00</span>
                                <span class="text-slate-600">/</span>
                                <span id="player-duration">0:00</span>
                            </div>
                        </div>

                        <div class="player-progress-track rounded-full overflow-hidden" id="player-progress-track">
                            <div class="player-progress-fill" id="player-progress"></div>
                        </div>

                        <p class="mt-2 text-[10px] text-slate-400">
                            Optional: hit play while you spin up n8n, generate certs and connect your Telegram bots.
                        </p>

                        <audio id="reading-audio" src="/assets/mp3/reading.mp3" preload="metadata"></audio>
                    </div>

                    <div class="bg-white/95 border border-slate-200 rounded-2xl shadow-md p-5">
                        <h3 class="text-sm font-semibold text-slate-700 uppercase tracking-[0.18em] mb-3 flex items-center gap-2">
                            <span class="inline-flex w-6 h-6 rounded-full bg-sky-100 text-sky-600 items-center justify-center text-xs">
                                <i class="fa-solid fa-network-wired"></i>
                            </span>
                            n8nai Guide Map
                        </h3>

                        <nav class="space-y-1.5 text-[13px] md:text-sm">
                            <!-- 1 -->
                            <a href="#intro"
                               class="toc-link flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-50 hover:text-slate-900 transition">
                                <span class="w-1.5 h-1.5 rounded-full bg-sky-400"></span>
                                <div class="flex flex-col leading-tight">
                                    <span class="font-semibold">1. Why n8nai</span>
                                    <span class="text-[11px] text-slate-500">Bots, HTTPS & reproducibility</span>
                                </div>
                            </a>

                            <!-- 2 -->
                            <a href="#stack"
                               class="toc-link flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-50 hover:text-slate-900 transition">
                                <span class="w-1.5 h-1.5 rounded-full bg-emerald-400"></span>
                                <div class="flex flex-col leading-tight">
                                    <span class="font-semibold">2. Stack & layout</span>
                                    <span class="text-[11px] text-slate-500">Docker, ssl/, Workflows/</span>
                                </div>
                            </a>

                            <!-- 3 -->
                            <a href="#implementation"
                               class="toc-link flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-50 hover:text-slate-900 transition">
                                <span class="w-1.5 h-1.5 rounded-full bg-indigo-400"></span>
                                <div class="flex flex-col leading-tight">
                                    <span class="font-semibold">3. Implementation</span>
                                    <span class="text-[11px] text-slate-500">Clone ‚Üí TLS ‚Üí Telegram</span>
                                </div>
                            </a>

                            <!-- 4 -->
                            <a href="#lessons"
                               class="toc-link flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-50 hover:text-slate-900 transition">
                                <span class="w-1.5 h-1.5 rounded-full bg-amber-400"></span>
                                <div class="flex flex-col leading-tight">
                                    <span class="font-semibold">4. Lessons</span>
                                    <span class="text-[11px] text-slate-500">Webhooks, UX & security</span>
                                </div>
                            </a>

                            <!-- 5 -->
                            <a href="#next"
                               class="toc-link flex items-center gap-2 px-2 py-1.5 rounded-lg hover:bg-slate-50 hover:text-slate-900 transition">
                                <span class="w-1.5 h-1.5 rounded-full bg-rose-400"></span>
                                <div class="flex flex-col leading-tight">
                                    <span class="font-semibold">5. Roadmap</span>
                                    <span class="text-[11px] text-slate-500">More bots & infra</span>
                                </div>
                            </a>
                        </nav>
                    </div>

                    <!-- Author card -->
                    <div class="bg-slate-900 text-slate-50 rounded-2xl p-4 flex items-center gap-3 shadow-md">
                        <img src="/assets/img/anass4.png"
                             alt="Anass"
                             class="w-12 h-12 rounded-full border-2 border-sky-400 object-cover">
                        <div class="text-xs">
                            <p class="font-semibold">Written by Anass Assim</p>
                            <p class="text-slate-300">
                                DevOps Junior &amp; SysAdmin based in Seville.  
                                Loves wiring together n8n, Telegram and AI models into practical tools.
                            </p>
                        </div>
                    </div>
                </div>
            </aside>
        </div>
    </section>
</main>


    <!-- Footer -->
    <footer class="py-12 bg-slate-900 text-white mt-10">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center">
                <div class="mb-8">
                    <h3 class="text-2xl font-bold mb-4">Anass Assim</h3>
                    <p class="text-slate-400 max-w-md mx-auto">
                        DevOps Junior & System Administrator passionate about creating efficient, scalable solutions.
                    </p>
                </div>

                <div class="flex justify-center space-x-6 mb-8">
                    <a href="https://www.linkedin.com/in/anass-assim/" class="magnetic text-slate-400 hover:text-white text-2xl transition-all duration-300 transform hover:scale-125" target="_blank">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://github.com/ciscoAnass" class="magnetic text-slate-400 hover:text-white text-2xl transition-all duration-300 transform hover:scale-125" target="_blank">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="https://x.com/ciscoAnass" class="magnetic text-slate-400 hover:text-white text-2xl transition-all duration-300 transform hover:scale-125" target="_blank">
                        <i class="fa-brands fa-x-twitter"></i>
                    </a>
                    <a href="mailto:anass.assim.2010@gmail.com" class="magnetic text-slate-400 hover:text-white text-2xl transition-all duration-300 transform hover:scale-125" target="_blank">
                        <i class="fas fa-envelope"></i>
                    </a>    
                </div>

                <div class="border-t border-slate-800 pt-8">
                    <p class="text-slate-400 text-sm">
                        &copy; <span id="currentYear">2025</span> Anass Assim. All rights reserved.
                    </p>
                    <p class="text-slate-500 text-xs mt-2">
                        Built with passion using modern web technologies
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Inline JS -->
    <script>
        // Scroll indicator
        const scrollBar = document.querySelector('.scroll-indicator');
        window.addEventListener('scroll', () => {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            scrollBar.style.width = progress + '%';
        });

        // Header shadow
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 40) {
                navbar.classList.add('shadow-lg', 'bg-white/90');
            } else {
                navbar.classList.remove('shadow-lg', 'bg-white/90');
            }
        });

        // Mobile menu
        const mobileBtn = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileBtn.addEventListener('click', () => {
            const hidden = mobileMenu.classList.contains('hidden');
            mobileMenu.classList.toggle('hidden');
            mobileBtn.setAttribute('aria-expanded', String(hidden));
        });

        // Dynamic year
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        // Copy link
        const copyBtn = document.getElementById('copy-link-btn');
        copyBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(window.location.href);
                copyBtn.innerHTML = '<i class="fa-solid fa-check mr-2 text-emerald-500"></i> Link copied!';
                setTimeout(() => {
                    copyBtn.innerHTML = '<i class="fa-solid fa-link mr-2 text-slate-500"></i>Copy article link';
                }, 2000);
            } catch (e) {
                console.error(e);
            }
        });

        // TOC active highlighting
        const tocLinks = document.querySelectorAll('.toc-link');
        const headings = [...document.querySelectorAll('#article-content h2, #article-content h3')];

        const tocObserver = new IntersectionObserver(
            (entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.id;
                        tocLinks.forEach(link => {
                            link.classList.toggle('active', link.getAttribute('href') === '#' + id);
                        });
                    }
                });
            },
            { rootMargin: "0px 0px -60% 0px", threshold: 0.1 }
        );

        headings.forEach(h => tocObserver.observe(h));

        // Magnetic effect
        document.querySelectorAll('.magnetic').forEach(el => {
            el.addEventListener('mousemove', (e) => {
                const rect = el.getBoundingClientRect();
                const x = (e.clientX - rect.left - rect.width / 2) / 20;
                const y = (e.clientY - rect.top - rect.height / 2) / 20;
                el.style.transform = `translate(${x}px, ${y}px) scale(1.1)`;
            });
            el.addEventListener('mouseleave', () => {
                el.style.transform = 'translate(0, 0) scale(1)';
            });
        });

        // Simple reading-time estimate based on content length
        (function computeReadTime() {
            const text = document.getElementById('article-content').innerText || '';
            const words = text.trim().split(/\s+/).length;
            const minutes = Math.max(1, Math.round(words / 200)); // ~200 wpm
            document.getElementById('read-time').textContent = `~${minutes} min read`;
        })();

        // MUSIC PLAYER LOGIC
        const audio = document.getElementById('reading-audio');
        const playBtn = document.getElementById('play-pause-btn');
        const playIcon = document.getElementById('play-pause-icon');
        const progressTrack = document.getElementById('player-progress-track');
        const progressFill = document.getElementById('player-progress');
        const currentTimeEl = document.getElementById('player-current-time');
        const durationEl = document.getElementById('player-duration');

        function formatTime(sec) {
            if (isNaN(sec) || sec === Infinity) return "0:00";
            const minutes = Math.floor(sec / 60);
            const seconds = Math.floor(sec % 60);
            return minutes + ":" + String(seconds).padStart(2, '0');
        }

        if (audio) {
            audio.addEventListener('loadedmetadata', () => {
                durationEl.textContent = formatTime(audio.duration);
            });

            audio.addEventListener('timeupdate', () => {
                currentTimeEl.textContent = formatTime(audio.currentTime);
                if (audio.duration) {
                    const percent = (audio.currentTime / audio.duration) * 100;
                    progressFill.style.width = percent + '%';
                }
            });

            audio.addEventListener('ended', () => {
                playIcon.classList.remove('fa-pause');
                playIcon.classList.add('fa-play');
            });

            playBtn.addEventListener('click', () => {
                if (audio.paused) {
                    audio.play().catch(err => console.error(err));
                    playIcon.classList.remove('fa-play');
                    playIcon.classList.add('fa-pause');
                } else {
                    audio.pause();
                    playIcon.classList.remove('fa-pause');
                    playIcon.classList.add('fa-play');
                }
            });

            progressTrack.addEventListener('click', (e) => {
                const rect = progressTrack.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const ratio = clickX / rect.width;
                if (audio.duration) {
                    audio.currentTime = Math.min(Math.max(ratio * audio.duration, 0), audio.duration);
                }
            });
        }
    </script>
</body>
</html>
